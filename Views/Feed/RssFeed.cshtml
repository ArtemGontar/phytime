@using System.ServiceModel.Syndication;
@using Phytime.Models;
@using Phytime.Helpers;
@model Feed;
@{
    ViewBag.Title = "RssFeed";
}
@if (ViewBag.Subscribed)
{
    <a href="@Url.Action("Unsubscribe", "Feed", new { url = Model.Url })">Unsubscribe</a>
}
else
{
    <a href="@Url.Action("Subscribe", "Feed", new { url = Model.Url })">Subscribe</a>
}
<a href="@Url.Action("ChangeOrder", "Feed")">Change order</a>
@using (Html.BeginForm("RssFeed", "Feed", new { url = Model.Url, page = 1 }))
{
    @Html.DropDownList("SortValue", new List<SelectListItem>
    {
       new SelectListItem{ Text="Newest", Value = "Newest" },
       new SelectListItem{ Text="Oldest", Value = "Oldest" },
       new SelectListItem{ Text="Last week", Value = "Last week" },
       new SelectListItem{ Text="Last month", Value = "Last month" }
    })

    <input type="submit" value="Submit" />
}
<hr />
@foreach (SyndicationItem item in Model.SyndicationItems)
{
    @*<h3>@item.Title.Text</h3>
        <p>@item.Summary.Text</p>*@
    <div>
        <a href="@item.Links[0].Uri.ToString()">
            @item.Title.Text
        </a>
        <span>@item.PublishDate.ToString("D")</span>
    </div>
    <div>
        <p>
            @item.Summary.Text
        </p>
    </div>
}

<div class="btn-group">
    @PagingHelper.PageLinks(Html, Model.PageInfo, x => Url.Action("RssFeed", new { url = Model.Url, page = x }))
</div>

<style>
    .selected {
        background-color: #0094ff;
    }
</style>
